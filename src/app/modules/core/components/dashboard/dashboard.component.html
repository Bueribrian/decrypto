<div class="container dashboard">
    <div class="dashboard__header">
        <!-- Coin selector -->
        <mat-form-field>
            <mat-label>Coin</mat-label>
            <mat-select class="no-padding" (selectionChange)="getTrendigCurrencies()" [(value)]="selectedCurrency">
                <mat-option *ngFor="let currency of currencies" [value]="currency">
                    {{currency}}
                </mat-option>
            </mat-select>
        </mat-form-field>

        <!-- View selector -->
        <mat-button-toggle-group [(ngModel)]="displayType">
            <mat-button-toggle value="cards" aria-label="Cards view">
                <mat-icon>dashboard</mat-icon>
            </mat-button-toggle>
            <mat-button-toggle value="table" aria-label="Table view">
                <mat-icon>table_rows</mat-icon>
            </mat-button-toggle>
        </mat-button-toggle-group>
    </div>

    <div *ngIf="!error; else errorAlert" class="dashboard__content">
        <h2 class="dashboard__title">Trending currencies:</h2>

        <ng-container *ngIf="!loading; else loadingSpinner">
            <ng-container *ngIf="displayType === 'table'">
                <app-coins-table [coins]="$coins"></app-coins-table>
            </ng-container>
            <ng-container *ngIf="displayType === 'cards'">
                <div class="cards">
                    <app-coin-card *ngFor="let coin of ($coins|async)" [coin]="coin"
                        [currency]="selectedCurrency"></app-coin-card>
                </div>
            </ng-container>
        </ng-container>
    </div>
</div>

<!-- TODO: Mejorar este mensaje de error -->
<ng-template #errorAlert>
    Message error
</ng-template>

<ng-template #loadingSpinner>
    <div class="flex-center-center p-8">
        <mat-spinner></mat-spinner>
    </div>
</ng-template>